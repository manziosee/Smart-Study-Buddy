{% extends 'base/base.html' %}

{% block title %}Dashboard - Smart Study Buddy{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Welcome Section -->
    <div class="relative bg-black rounded-2xl p-8 text-white shadow-2xl animate-fade-in overflow-hidden" data-aos="fade-down">
        <!-- Animated background particles -->
        <div class="absolute inset-0 opacity-20">
            <div class="absolute top-4 right-8 w-16 h-16 bg-white rounded-full animate-float"></div>
            <div class="absolute bottom-4 left-8 w-12 h-12 bg-yellow-300 rounded-full animate-float-delayed"></div>
            <div class="absolute top-1/2 right-1/4 w-8 h-8 bg-pink-300 rounded-full animate-bounce-slow"></div>
        </div>
        
        <div class="relative z-10 flex items-center justify-between">
            <div>
                <h1 class="text-4xl font-bold mb-2">
                    <span data-typewriter data-speed="80">Welcome back, {{ user.first_name|default:user.email }}!</span> 
                    <span class="animate-bounce-slow ml-2">ðŸ§ </span>
                </h1>
                <p class="text-gray-300 text-lg animate-fade-in" style="animation-delay: 1s;">Ready to supercharge your learning with AI?</p>
            </div>
            <div class="hidden md:block">
                <div class="magnetic w-24 h-24 glass-effect rounded-full flex items-center justify-center animate-pulse-glow hover-lift">
                    <i class="fas fa-graduation-cap text-3xl text-white"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-200" data-aos="fade-up" data-aos-delay="100">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-black rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-upload text-xl text-white"></i>
                </div>
                <h3 class="text-lg font-semibold text-black">Upload Document</h3>
            </div>
            <p class="text-gray-600 mb-6">Upload PDF, TXT, or MD files to extract and summarize content.</p>
            <a href="#" onclick="alert('Upload feature coming soon!')" class="magnetic bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 inline-block transition-all duration-200 transform hover:scale-105 shadow-lg">
                <i class="fas fa-plus mr-2"></i>Upload File
            </a>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-200" data-aos="fade-up" data-aos-delay="200">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-black rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-edit text-xl text-white"></i>
                </div>
                <h3 class="text-lg font-semibold text-black">Create Note</h3>
            </div>
            <p class="text-gray-600 mb-6">Write your own notes and generate AI summaries.</p>
            <a href="#" onclick="alert('Create note feature coming soon!')" class="magnetic bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 inline-block transition-all duration-200 transform hover:scale-105 shadow-lg">
                <i class="fas fa-plus mr-2"></i>New Note
            </a>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-200" data-aos="fade-up" data-aos-delay="300">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-black rounded-lg flex items-center justify-center mr-4">
                    <i class="fas fa-question-circle text-xl text-white"></i>
                </div>
                <h3 class="text-lg font-semibold text-black">Generate Quiz</h3>
            </div>
            <p class="text-gray-600 mb-6">Create interactive quizzes from your notes.</p>
            <a href="#" onclick="alert('Quiz generation feature coming soon!')" class="magnetic bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 inline-block transition-all duration-200 transform hover:scale-105 shadow-lg">
                <i class="fas fa-brain mr-2"></i>Make Quiz
            </a>
        </div>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6">
        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-200" data-aos="zoom-in" data-aos-delay="100">
            <div class="w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-file-alt text-2xl text-white"></i>
            </div>
            <div class="text-3xl font-bold text-black mb-2 counter" data-target="{{ stats.notes_count }}">0</div>
            <div class="text-gray-600 font-medium">Notes</div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-200" data-aos="zoom-in" data-aos-delay="200">
            <div class="w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-magic text-2xl text-white"></i>
            </div>
            <div class="text-3xl font-bold text-black mb-2 counter" data-target="{{ stats.summaries_count }}">0</div>
            <div class="text-gray-600 font-medium">Summaries</div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-200" data-aos="zoom-in" data-aos-delay="300">
            <div class="w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-question-circle text-2xl text-white"></i>
            </div>
            <div class="text-3xl font-bold text-black mb-2 counter" data-target="{{ stats.quizzes_count }}">0</div>
            <div class="text-gray-600 font-medium">Quizzes</div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 text-center hover:shadow-2xl transition-all duration-300 transform hover:scale-105 border border-gray-200" data-aos="zoom-in" data-aos-delay="400">
            <div class="w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-trophy text-2xl text-white"></i>
            </div>
            <div class="text-3xl font-bold text-black mb-2 counter" data-target="{{ stats.quiz_attempts }}">0</div>
            <div class="text-gray-600 font-medium">Quiz Attempts</div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Recent Notes -->
        <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 hover-lift" data-aos="fade-up" data-aos-delay="100">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fas fa-file-alt text-black mr-2"></i>Recent Notes
            </h3>
            {% if recent_notes %}
                <div class="space-y-3">
                    {% for note in recent_notes %}
                        <div class="border-l-4 border-black pl-4 py-2">
                            <h4 class="font-medium">{{ note.title }}</h4>
                            <p class="text-sm text-gray-600">{{ note.created_at|date:"M d, Y" }}</p>
                            <div class="mt-2 space-x-2">
                                <span class="text-black text-sm">View</span>
                                {% if not note.summary %}
                                    <span class="text-gray-600 text-sm">Summarize</span>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-gray-500">No notes yet. Start by uploading a document!</p>
            {% endif %}
        </div>

        <!-- Recent Quizzes -->
        <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 hover-lift" data-aos="fade-up" data-aos-delay="200">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fas fa-question-circle text-black mr-2"></i>Recent Quizzes
            </h3>
            {% if recent_quizzes %}
                <div class="space-y-3">
                    {% for quiz in recent_quizzes %}
                        <div class="border-l-4 border-black pl-4 py-2">
                            <h4 class="font-medium">{{ quiz.title }}</h4>
                            <p class="text-sm text-gray-600">{{ quiz.created_at|date:"M d, Y" }}</p>
                            <div class="mt-2">
                                <span class="text-black text-sm">Take Quiz</span>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-gray-500">No quizzes yet. Generate from your notes when available!</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
// Counter animation for stats
document.addEventListener('DOMContentLoaded', function() {
    const counters = document.querySelectorAll('.counter');
    
    const animateCounter = (counter) => {
        const target = parseInt(counter.getAttribute('data-target'));
        const increment = target / 50;
        let current = 0;
        
        const updateCounter = () => {
            if (current < target) {
                current += increment;
                counter.textContent = Math.ceil(current);
                setTimeout(updateCounter, 30);
            } else {
                counter.textContent = target;
            }
        };
        
        updateCounter();
    };
    
    // Intersection Observer for counter animation
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounter(entry.target);
                observer.unobserve(entry.target);
            }
        });
    });
    
    counters.forEach(counter => {
        observer.observe(counter);
    });
});
</script>
{% endblock %}